# The Road Warrior Architectural Kata by Neal Ford

Проектная работа по курсу Software Architect 2024-11

**Выполнил:** Бокитько Глеб Дмитриевич

## Описание кейса
A major travel agency wants to build the next generation online trip management dashboard to allow travelers to see all of their existing reservations organized by trip either online of through their mobile device.

- Users: 10,000+ registered users worldwide
- Requirements:
  - The system must interface with the agency’s existing airline, hotel, and car rental interface system to automatically load reservations via frequent flier accounts, hotel point accounts, and car rental rewards accounts.
  - Customers should be able to add existing reservations manually as well.
  - Items in the dashboard should be able to be grouped by trip, and once the trip is complete, the items should automatically be removed from the dashboard.
  - Users should also be able to share their trip information by interfacing with standard social media sites.
  - Richest user interface possible across all deployment platforms
- Additional Context:
  - must integrate seamlessly with existing travel systems
  - partnership deals are being negotiated to create 'favored' vendors
  - must work internationally

## Бизнес контекст 
Необходимо разработать систему генерации дэшбордов туриста в разрезе путешествия для международной компании турагента.

## Бизнес-цели и бизнес драйверы

Цели общее:
1. Перевести пользователей на использование нового приложения
2. Завлечь больше клиентов за счет предоставления удобного и самого полного функциональностью сервиса 
3. Завлечь в партнерские соглашения больше вендоров предоставляющих услуги для путешественников (авиакомпании, отели, вендоры жд транспорта и тп) и сформировать из них костяк наиболее привелегированных для долгосрочного сотрудничества

Цели **SMART**: 
1. Перевести 70% текущих пользователей на новую систему дэшбордов в течение года 
2. За следующий 2 года увеличить количество пользователей решения в 10 раз
3. Заключить не менее 10 партнерских соглашений с вендорами услуг для путешесвенников за следующие 2 года 

Бизнес-драйверы: 
1. Расширение доли рынка 
2. Расширение источников cash flow 
3. Повышение лояльности клиентов 
4. Создание win-win партнерской цепи "вендор" - "агрегатор" - "клиент" в  сфере турбизнеса

Арх-драйверы:
1. Масштабируемость (в том числе по миру)
2. Функциональная расширяемость
3. Расширяемость подключеных вендоров 

## Стейкхолдеров и их потребности
1. Путешественники - ключевые 
   1. Создание единого дэш борда со всей информацией по поедке (авиабилты, брони отелей, экскурсий и тп)
   2. Выгрузка "саммари о поездке" в соц сети (инста - тг блог - вк)
   3. Загрузка данных о бронях в "единое окно"
2. Туроператор - вспомогательные 
   1. Генерация туров через платформу
   2. Получение оплаты через подписочную систему за использование дэшбордов
   3. Популяризация сервисча через соц сети за счет инфлюенсеров и обычных людей
3. Вендоры - вспомогательные
   1. Выявление "горячих" направлений
   2. Предоставление "акций" для отсутствия простоя
   


   ## Атрибуты качества (и не функциональные требования)
   ### Критические характеристики
   - Работа с пользователями по всему миру 
   - Безопасность перс данных
   - Легкость интеграции с новыми вендорами
   
   ### Критические функциональные сценарии
   - Отображение дэшборда пользователя
   - Интеграция данных из существующими системами
   - Ввод доп данных о поездке
   
   ![alt text](/course_work/assets/image-2.png)
   
   ###  Атрибуты качества
   1. Система должна поддерживать одновременную работу 1000 пользователей на одном географическом кластере
   2. Система должна позволять увеличение производительности за счёт увеличения вычислительной мощности и ресурсов со стороны оборудования, а также за счет добавления дополнительных вычислительных узлов таким образом чтобы требования к производительности и к надежности не падали. 
   3. Система должна позволять хранить данные 20000 пользователей в этом году из расчета на 4 поездки в год на 1 пользователя, где предполагается 2 перелета, 1 бронирование отеля, 1 бронирование автомобиля
   4. Система должна позволять хранить локально у пользователя в мобильном приложении данные ближайшей поездки
   5. Система должна позволять строить дэшбор поездки в течение 1с при заданых параметрах объемов хранимых данных и поддерживать это значение не менее чем в 5с при росте количества пользователей
   6. Система должна демонстрировать уровень надёжности, при котором вероятность сбоя при обращении к критическим функциям не превышает 10%.
   
   
   ### НФТ
   7. Система должна позволять масштабирование с учетом георграфической распределенности
   8. Система должна поддерживать существующие интерфейсы интеграции с вендорскими системами турагентства
   9. Система предполагает хранение персональных данных
   
   
   
   ## Контекстная схема системы
   Ниже приведена контекстная диаграмма для разрабатываемой системы. На схеме изображены основные классы пользователей и внешние системы с которыми происходит интеграция 

   ![alt text](/course_work/assets/image.png)

   
   ## Диаграмма компонентов системы

    Далее рассмотрим более детально состав приложения и его разделение на компоненты. 

    Для начала предлагается рассмотреть доменную область в рамках которой существует приложение. 
    Моделирование предметной области приведено при помощи метода event storming и приведено ниже 

    ![alt text](/course_work/assets/image-9.png)
    
    Основные события системы: 
    ![alt text](/course_work/assets/image-5.png)
    
    Основные функциональные контексты, которые удалось выявить: 
    10) поездка
    11) авторизация
    12) партнерские программы
    13) архив поездок
 
 На основе сформулированной модели предметной области были выделены компоненты, составляющие систему Travel agency app

![alt text](/course_work/assets/image-3.png)

Более детальное представлеине приведено на диаграмме контейнеров. 
Основой построения системмы стали 2 решения подробнее с которыми ознакомиться можно в разделе ADR-1 и ADR-5

![alt text](/course_work/assets/image-4.png)

При этом необходимо помнить что в соответствии с критическими архитектурными требованиями приложение должно работать с пользователями по всему миру и соответственно должно быть геораспределенным. 

![alt text](/course_work/assets/image-1.png)


### Декомпозиция слоя данных 
![alt text](/course_work/assets/image-22.png)

![alt text](/course_work/assets/image-25.png)

## Процессное моделирвоание

С учетом описанной контейнерной диаграммы и описанного требования к географической распределенности системы рассмотрим диаграммы последовательностей для критических сценариев системы. 

### Просмотр информации о поезде пользователем 
![alt text](/course_work/assets/image-6.png)


### Обновление данных поездки из партнерских систем
![alt text](/course_work/assets/image-7.png)




## Развертывание
![alt text](/course_work/assets/image-8.png)



## ADL 
- ADR-1. Решение об управлении ценностями Application Centric vs Data Centric  
- ADR-2. Возможность использования решений существующих на рынке
- ADR-3. Работа с пользователями по всему миру
- ADR-4. Решение по декомпозиции
- ADR-5. Решение по разделение АПИ по профилю нагрузки